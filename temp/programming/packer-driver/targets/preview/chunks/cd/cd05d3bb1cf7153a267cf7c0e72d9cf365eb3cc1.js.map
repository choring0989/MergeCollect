{"version":3,"sources":["file:///C:/Users/%EC%9D%B4%EC%A7%80%EC%95%88/Documents/GitHub/MergeCollect/assets/script/Coin.ts"],"names":["_decorator","Component","Node","geometry","Camera","input","Input","PhysicsSystem","ccclass","property","Coin","_ray","Ray","onEnable","on","EventType","TOUCH_START","onTouchStart","onDisable","off","event","touch","cameraCom","screenPointToRay","getLocationX","getLocationY","instance","raycast","raycastResults","i","length","item","collider","node","targetNode","console","log"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAkBC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,a,OAAAA,a;;;;;;;;;OAC5E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;sBAGjBU,I,WADZF,OAAO,CAAC,MAAD,C,UAGHC,QAAQ,CAACL,MAAD,C,UAGRK,QAAQ,CAACP,IAAD,C,2BANb,MACaQ,IADb,SAC0BT,SAD1B,CACoC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQxBU,IARwB,GAQH,IAAIR,QAAQ,CAACS,GAAb,EARG;AAAA;;AAUhCC,QAAAA,QAAQ,GAAG;AACPR,UAAAA,KAAK,CAACS,EAAN,CAASR,KAAK,CAACS,SAAN,CAAgBC,WAAzB,EAAsC,KAAKC,YAA3C,EAAyD,IAAzD;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACRb,UAAAA,KAAK,CAACc,GAAN,CAAUb,KAAK,CAACS,SAAN,CAAgBC,WAA1B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;;AAEDA,QAAAA,YAAY,CAACG,KAAD,EAAoB;AAC5B,cAAMC,KAAK,GAAGD,KAAK,CAACC,KAApB;AACA,eAAKC,SAAL,CAAeC,gBAAf,CAAgCF,KAAK,CAACG,YAAN,EAAhC,EAAsDH,KAAK,CAACI,YAAN,EAAtD,EAA4E,KAAKd,IAAjF;;AACA,cAAIJ,aAAa,CAACmB,QAAd,CAAuBC,OAAvB,CAA+B,KAAKhB,IAApC,CAAJ,EAA+C;AAC3C,gBAAMiB,cAAc,GAAGrB,aAAa,CAACmB,QAAd,CAAuBE,cAA9C;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,cAAc,CAACE,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC5C,kBAAME,IAAI,GAAGH,cAAc,CAACC,CAAD,CAA3B;;AACA,kBAAIE,IAAI,CAACC,QAAL,CAAcC,IAAd,IAAsB,KAAKC,UAA/B,EAA2C;AACvCC,gBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACA;AACH;AACJ;AACJ,WATD,MASO;AACHD,YAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AACH;AACJ;;AAjC+B,O","sourcesContent":["import { _decorator, Component, Node, EventTouch, geometry, Camera, input, Input, PhysicsSystem } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Coin')\nexport class Coin extends Component {\n    // Specify the camera rendering the target node.\n    @property(Camera)\n    readonly cameraCom!: Camera;\n\n    @property(Node)\n    public targetNode!: Node\n\n    private _ray: geometry.Ray = new geometry.Ray();\n\n    onEnable() {\n        input.on(Input.EventType.TOUCH_START, this.onTouchStart, this);\n    }\n\n    onDisable() {\n        input.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n    }\n\n    onTouchStart(event: EventTouch) {\n        const touch = event.touch!;\n        this.cameraCom.screenPointToRay(touch.getLocationX(), touch.getLocationY(), this._ray);\n        if (PhysicsSystem.instance.raycast(this._ray)) {\n            const raycastResults = PhysicsSystem.instance.raycastResults;\n            for (let i = 0; i < raycastResults.length; i++) {\n                const item = raycastResults[i];\n                if (item.collider.node == this.targetNode) {\n                    console.log('raycast hit the target node !');\n                    break;\n                }\n            }\n        } else {\n            console.log('raycast does not hit the target node !');\n        }\n    }\n}\n\n"]}